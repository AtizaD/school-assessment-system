# PWA Service Worker MIME Type
<IfModule mod_mime.c>
    AddType application/javascript .js
    AddType application/manifest+json .json
</IfModule>

# Redirect root to login page
RewriteEngine On

# If accessing root (index.php or /), redirect to login
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^(.*)$ /login.php [L,R=302]

# Enable HTTPS redirect (optional, but recommended for PWA)
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Cache control for service worker (don't cache it!)
<FilesMatch "sw\.js$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</FilesMatch>

# Cache control for manifest
<FilesMatch "manifest\.json$">
    Header set Cache-Control "public, max-age=604800"
</FilesMatch>
